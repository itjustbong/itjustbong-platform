---
title: "[Docker] Docker Compose ì™„ë²½ ê°€ì´ë“œ: ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨, í¬íŠ¸ ë§¤í•‘"
description: "Docker Composeì˜ í•µì‹¬ ê°œë…ì¸ ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨, í¬íŠ¸ ë§¤í•‘ì„ ì‹¤ë¬´ ì˜ˆì œì™€ í•¨ê»˜ ì´í•´í•˜ê¸°"
category: "devops"
tags: ["docker", "docker-compose", "network", "volume", "devops"]
createdAt: "2026-01-04"
updatedAt: "2026-01-04"
published: true
---

## Docker Compose ê°€ì´ë“œ: ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨, í¬íŠ¸ ë§¤í•‘

Docker Composeë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ê°€ì¥ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ì´ ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨, í¬íŠ¸ ë§¤í•‘ì…ë‹ˆë‹¤. ì´ ì„¸ ê°€ì§€ í•µì‹¬ ê°œë…ì„ ì‹¤ë¬´ ì˜ˆì œì™€ í•¨ê»˜ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## Docker Composeë€?

Docker ComposeëŠ” **ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì •ì˜í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë„êµ¬**ì…ë‹ˆë‹¤. ì‰½ê²Œ ë§í•´ ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬(IaC)í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë„êµ¬ì£ .

```mermaid
flowchart TB
    subgraph DockerCompose["docker-compose.yml"]
        BE[Backend ì„œë¹„ìŠ¤]
        DB[Database ì„œë¹„ìŠ¤]
        RD[Redis ì„œë¹„ìŠ¤]
    end

    subgraph ì‹¤í–‰ê²°ê³¼["ì‹¤ì œ ì‹¤í–‰ë˜ëŠ” ì»¨í…Œì´ë„ˆë“¤"]
        BE_C[Backend ì»¨í…Œì´ë„ˆ]
        DB_C[Database ì»¨í…Œì´ë„ˆ]
        RD_C[Redis ì»¨í…Œì´ë„ˆ]
    end

    DockerCompose -->|docker compose up| ì‹¤í–‰ê²°ê³¼

    style DockerCompose fill:#E8F4FD
    style ì‹¤í–‰ê²°ê³¼ fill:#E8F8E8
```

### Docker CLI vs Docker Compose

| ë°©ì‹ | ëª…ë ¹ì–´ ì˜ˆì‹œ | íŠ¹ì§• |
|------|------------|------|
| **Docker CLI** | `docker run -d -p 3000:3000 --network my-net my-app` | ì»¨í…Œì´ë„ˆë§ˆë‹¤ ê¸´ ëª…ë ¹ì–´ ì…ë ¥ í•„ìš” |
| **Docker Compose** | `docker compose up` | YAML íŒŒì¼ì— ëª¨ë“  ì„¤ì • ì •ì˜, í•œ ë²ˆì— ì‹¤í–‰ |

---

## í¬íŠ¸ ë§¤í•‘ (Port Mapping)

### ê¸°ë³¸ ê°œë…

í¬íŠ¸ ë§¤í•‘ì€ **í˜¸ìŠ¤íŠ¸(ë‚´ ì»´í“¨í„°)ì˜ í¬íŠ¸**ì™€ **ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ í¬íŠ¸**ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```yaml
services:
  backend:
    ports:
      - "8080:3000"  # í˜¸ìŠ¤íŠ¸:ì»¨í…Œì´ë„ˆ
```

```mermaid
flowchart LR
    subgraph Host["ğŸ–¥ï¸ í˜¸ìŠ¤íŠ¸ (ë‚´ ì»´í“¨í„°)"]
        HP[í¬íŠ¸ 8080]
    end

    subgraph Container["ğŸ“¦ ì»¨í…Œì´ë„ˆ"]
        CP[í¬íŠ¸ 3000]
        APP[Node.js ì•±]
    end

    User["ğŸ‘¤ ì‚¬ìš©ì<br/>localhost:8080"] --> HP
    HP -->|í¬íŠ¸ í¬ì›Œë”©| CP
    CP --> APP

    style Host fill:#FFE4E1
    style Container fill:#E0FFFF
```

### í¬íŠ¸ ë§¤í•‘ ì˜ˆì‹œ

```yaml
services:
  # ê°™ì€ í¬íŠ¸ë¡œ ë§¤í•‘
  backend:
    ports:
      - "3000:3000"   # í˜¸ìŠ¤íŠ¸ 3000 â†’ ì»¨í…Œì´ë„ˆ 3000

  # ë‹¤ë¥¸ í¬íŠ¸ë¡œ ë§¤í•‘ (í¬íŠ¸ ì¶©ëŒ í•´ê²°)
  backend-dev:
    ports:
      - "3001:3000"   # í˜¸ìŠ¤íŠ¸ 3001 â†’ ì»¨í…Œì´ë„ˆ 3000

  # ì—¬ëŸ¬ í¬íŠ¸ ë§¤í•‘
  nginx:
    ports:
      - "80:80"       # HTTP
      - "443:443"     # HTTPS
```

### ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜

```yaml
# âŒ ì˜ëª»ëœ ì´í•´: ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ë°”ê¾¸ë©´ ì•±ë„ ë°”ë€ë‹¤?
services:
  backend:
    ports:
      - "3000:8080"   # ì•±ì´ 3000ì—ì„œ ì‹¤í–‰ë˜ëŠ”ë° 8080ìœ¼ë¡œ ë§¤í•‘í•˜ë©´ ì•ˆë¨!

# âœ… ì˜¬ë°”ë¥¸ ì´í•´: ì•±ì´ ì‹¤í–‰ë˜ëŠ” í¬íŠ¸ì™€ ì¼ì¹˜í•´ì•¼ í•¨
services:
  backend:
    ports:
      - "8080:3000"   # ì•±ì€ 3000ì—ì„œ ì‹¤í–‰, ì™¸ë¶€ì—ì„œ 8080ìœ¼ë¡œ ì ‘ê·¼
```

> ğŸ’¡ **ì°¸ê³ **: ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í¬íŠ¸(ì˜¤ë¥¸ìª½)ëŠ” ì•±ì´ ì‹¤ì œë¡œ ë¦¬ìŠ¨í•˜ëŠ” í¬íŠ¸ì™€ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤. ë³€ê²½í•  ìˆ˜ ìˆëŠ” ê±´ í˜¸ìŠ¤íŠ¸ í¬íŠ¸(ì™¼ìª½)ë¿ì…ë‹ˆë‹¤.

---

## Docker ë„¤íŠ¸ì›Œí¬ (Network)

### ì™œ ë„¤íŠ¸ì›Œí¬ê°€ í•„ìš”í•œê°€?

Docker ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **ê²©ë¦¬ëœ í™˜ê²½**ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ ì„ ìœ„í•´ì„œëŠ” ê°™ì€ ë„¤íŠ¸ì›Œí¬ì— ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

```mermaid
flowchart TB
    subgraph Network["ğŸŒ Docker Network (app-network)"]
        subgraph BE["Backend ì»¨í…Œì´ë„ˆ"]
            BE_APP[Node.js ì•±]
        end
        subgraph DB["PostgreSQL ì»¨í…Œì´ë„ˆ"]
            DB_APP[PostgreSQL]
        end
        subgraph RD["Redis ì»¨í…Œì´ë„ˆ"]
            RD_APP[Redis]
        end
    end

    BE_APP -->|"postgres://db:5432"| DB_APP
    BE_APP -->|"redis://redis:6379"| RD_APP

    style Network fill:#FFF8DC
```

### ì„œë¹„ìŠ¤ ì´ë¦„ vs ì»¨í…Œì´ë„ˆ ì´ë¦„

Docker Composeì—ì„œ í—·ê°ˆë¦¬ëŠ” ê°œë… ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ **ì„œë¹„ìŠ¤ ì´ë¦„**ê³¼ **ì»¨í…Œì´ë„ˆ ì´ë¦„**ì˜ ì°¨ì´ì…ë‹ˆë‹¤.

```yaml
services:
  redis:                     # ğŸ‘ˆ ì„œë¹„ìŠ¤ ì´ë¦„ (DNSë¡œ ì‚¬ìš©)
    image: redis:7
    container_name: my-redis  # ğŸ‘ˆ ì»¨í…Œì´ë„ˆ ì´ë¦„ (ì‹ë³„ìš©)
```

```mermaid
flowchart LR
    subgraph DockerCompose["docker-compose.yml"]
        SN["ì„œë¹„ìŠ¤ ì´ë¦„: redis"]
        CN["ì»¨í…Œì´ë„ˆ ì´ë¦„: my-redis"]
    end

    subgraph ìš©ë„
        DNS["ë‚´ë¶€ DNS ì£¼ì†Œë¡œ ì‚¬ìš©<br/>redis://redis:6379"]
        PS["docker psì—ì„œ ì‹ë³„ìš©<br/>my-redis"]
    end

    SN --> DNS
    CN --> PS

    style DNS fill:#90EE90
    style PS fill:#FFB6C1
```

| êµ¬ë¶„ | ì„œë¹„ìŠ¤ ì´ë¦„ | ì»¨í…Œì´ë„ˆ ì´ë¦„ |
|------|------------|--------------|
| **ì •ì˜ ìœ„ì¹˜** | `services:` í•˜ìœ„ í‚¤ | `container_name:` ì†ì„± |
| **ìš©ë„** | Docker ë‚´ë¶€ DNS | docker ps ì‹ë³„ |
| **í†µì‹  ì‹œ ì‚¬ìš©** | âœ… ê°€ëŠ¥ | âŒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ |
| **ì˜ˆì‹œ** | `redis://redis:6379` | `docker logs my-redis` |

### Network Driver ì¢…ë¥˜

```yaml
networks:
  app-network:
    driver: bridge  # ê¸°ë³¸ê°’, ëŒ€ë¶€ë¶„ ì´ê±¸ ì‚¬ìš©
```

```mermaid
flowchart TB
    subgraph Drivers["Network Driver ì¢…ë¥˜"]
        direction LR
        B[bridge<br/>ê¸°ë³¸ê°’]
        H[host<br/>ìµœê³  ì„±ëŠ¥]
        O[overlay<br/>ë©€í‹° í˜¸ìŠ¤íŠ¸]
        M[macvlan<br/>ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬]
        N[none<br/>ì™„ì „ ê²©ë¦¬]
    end

    B --> B_DESC["ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ ë‚´ ê°€ìƒ ìŠ¤ìœ„ì¹˜<br/>ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ ì— ì‚¬ìš©"]
    H --> H_DESC["í˜¸ìŠ¤íŠ¸ OS ë„¤íŠ¸ì›Œí¬ ì§ì ‘ ì‚¬ìš©<br/>í¬íŠ¸ ë§¤í•‘ ë¶ˆí•„ìš”"]
    O --> O_DESC["ì—¬ëŸ¬ ì„œë²„ ê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²°<br/>Docker Swarm/K8s í•„ìš”"]
    M --> M_DESC["ë¬¼ë¦¬ NICì— ì§ì ‘ ì—°ê²°<br/>ê³ ê¸‰ ì‚¬ìš© ì‚¬ë¡€"]
    N --> N_DESC["ë„¤íŠ¸ì›Œí¬ ì—†ìŒ<br/>ë³´ì•ˆ ê²©ë¦¬ìš©"]

    style B fill:#90EE90
```

> ğŸ’¡ **ì‹¤ë¬´ íŒ**: ëŒ€ë¶€ë¶„ì˜ ê²½ìš° `bridge` ë“œë¼ì´ë²„ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤. driverë¥¼ ìƒëµí•˜ë©´ ìë™ìœ¼ë¡œ `bridge`ê°€ ì ìš©ë©ë‹ˆë‹¤.

### ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì˜ˆì‹œ

```yaml
version: "3.8"

services:
  backend:
    build: .
    networks:
      - app-network  # ğŸ‘ˆ ì´ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°
    environment:
      DATABASE_URL: "postgres://db:5432/mydb"  # ì„œë¹„ìŠ¤ ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼
      REDIS_URL: "redis://redis:6379"

  db:
    image: postgres:15
    networks:
      - app-network

  redis:
    image: redis:7
    networks:
      - app-network

networks:
  app-network:
    driver: bridge  # ìƒëµ ê°€ëŠ¥ (ê¸°ë³¸ê°’)
```

---

## Docker ë³¼ë¥¨ (Volume)

### ì™œ ë³¼ë¥¨ì´ í•„ìš”í•œê°€?

Docker ì»¨í…Œì´ë„ˆëŠ” **ì¼íšŒìš©**ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•˜ë©´ ë‚´ë¶€ ë°ì´í„°ë„ í•¨ê»˜ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ë³´ì¡´í•˜ë ¤ë©´ **ë³¼ë¥¨**ì´ í•„ìš”í•©ë‹ˆë‹¤.

```mermaid
flowchart LR
    subgraph ë³¼ë¥¨ì—†ìŒ["âŒ ë³¼ë¥¨ ì—†ì´"]
        C1[ì»¨í…Œì´ë„ˆ ìƒì„±] --> D1[ë°ì´í„° ì €ì¥] --> R1[ì»¨í…Œì´ë„ˆ ì‚­ì œ] --> L1[ğŸ’€ ë°ì´í„° ì†ì‹¤!]
    end

    subgraph ë³¼ë¥¨ìˆìŒ["âœ… ë³¼ë¥¨ ì‚¬ìš©"]
        C2[ì»¨í…Œì´ë„ˆ ìƒì„±] --> V2[ë³¼ë¥¨ì— ì €ì¥] --> R2[ì»¨í…Œì´ë„ˆ ì‚­ì œ] --> S2[âœ… ë°ì´í„° ìœ ì§€!]
    end

    style ë³¼ë¥¨ì—†ìŒ fill:#FFE4E1
    style ë³¼ë¥¨ìˆìŒ fill:#E8F8E8
```

### Named Volume vs Bind Mount

Dockerì—ì„œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ì…ë‹ˆë‹¤.

```mermaid
flowchart TB
    subgraph NamedVolume["ğŸ“¦ Named Volume"]
        NV_DEF["redis_data:/data"]
        NV_LOC["ì‹¤ì œ ìœ„ì¹˜: /var/lib/docker/volumes/"]
        NV_MGT["Dockerê°€ ìë™ ê´€ë¦¬"]
    end

    subgraph BindMount["ğŸ“ Bind Mount"]
        BM_DEF["./data:/data"]
        BM_LOC["ì‹¤ì œ ìœ„ì¹˜: í˜¸ìŠ¤íŠ¸ì˜ ./data"]
        BM_MGT["ê°œë°œìê°€ ì§ì ‘ ê´€ë¦¬"]
    end

    style NamedVolume fill:#E0FFFF
    style BindMount fill:#FFF8DC
```

| êµ¬ë¶„ | Named Volume | Bind Mount |
|------|-------------|------------|
| **ë¬¸ë²•** | `volume_name:/container/path` | `./host/path:/container/path` |
| **ê²½ë¡œ ì‹œì‘** | ì´ë¦„ë§Œ (ê²½ë¡œ êµ¬ë¶„ì ì—†ìŒ) | `./` ë˜ëŠ” `/`ë¡œ ì‹œì‘ |
| **ê´€ë¦¬ ì£¼ì²´** | Docker | ê°œë°œì |
| **volumes ì„¹ì…˜** | ì •ì˜ í•„ìš” | ì •ì˜ ë¶ˆí•„ìš” |
| **ì‚¬ìš© ì‚¬ë¡€** | í”„ë¡œë•ì…˜ ë°ì´í„°ë² ì´ìŠ¤ | ê°œë°œ ì‹œ ì½”ë“œ ì¦‰ì‹œ ë°˜ì˜ |

### ë³¼ë¥¨ êµ¬ë¶„ ë°©ë²•

```yaml
volumes:
  # Named Volume - ì´ë¦„ë§Œ ìˆê³  ê²½ë¡œ êµ¬ë¶„ì ì—†ìŒ
  - redis_data:/data          # âœ… Named Volume

  # Bind Mount - ./ ë˜ëŠ” / ë¡œ ì‹œì‘í•˜ëŠ” ê²½ë¡œ
  - ./local-data:/data        # âœ… Bind Mount (ìƒëŒ€ ê²½ë¡œ)
  - /var/mydata:/data         # âœ… Bind Mount (ì ˆëŒ€ ê²½ë¡œ)
```

### ì‹¤ì „ ì˜ˆì œ

```yaml
version: "3.8"

services:
  postgres:
    image: postgres:15
    volumes:
      - pg_data:/var/lib/postgresql/data  # Named Volume (ì˜êµ¬ ì €ì¥)
    environment:
      POSTGRES_PASSWORD: secret

  redis:
    image: redis:7
    volumes:
      - redis_data:/data  # Named Volume (ì˜êµ¬ ì €ì¥)
    command: redis-server --appendonly yes

  backend:
    build: .
    volumes:
      - ./src:/app/src  # Bind Mount (ê°œë°œ ì‹œ í•«ë¦¬ë¡œë“œìš©)

# Named Volumeì€ í•˜ë‹¨ì— ì„ ì–¸ í•„ìš”
volumes:
  pg_data:
  redis_data:
```

### Volume Driver

```yaml
volumes:
  pg_data:
    driver: local  # ê¸°ë³¸ê°’, í˜¸ìŠ¤íŠ¸ ë¡œì»¬ ì €ì¥ì†Œ

  # ê³ ê¸‰ ì‚¬ìš© (NFS, í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ë“±)
  shared_data:
    driver: nfs
```

| Driver | ì„¤ëª… | ì‚¬ìš© ì‚¬ë¡€ |
|--------|------|----------|
| **local** | í˜¸ìŠ¤íŠ¸ ë¡œì»¬ ì €ì¥ì†Œ (ê¸°ë³¸ê°’) | ëŒ€ë¶€ë¶„ì˜ ê²½ìš° |
| **nfs** | ë„¤íŠ¸ì›Œí¬ íŒŒì¼ ì‹œìŠ¤í…œ | ì—¬ëŸ¬ ì„œë²„ì—ì„œ ê³µìœ  |
| **aws-ebs** | AWS EBS ë³¼ë¥¨ | AWS í™˜ê²½ |
| **azure-file** | Azure íŒŒì¼ ê³µìœ  | Azure í™˜ê²½ |

---

## Docker Compose ê³ ê¸‰ ê¸°ëŠ¥

### depends_on: ì‹œì‘ ìˆœì„œ ì œì–´

ì»¨í…Œì´ë„ˆ ì‹œì‘ ìˆœì„œê°€ ì¤‘ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```yaml
services:
  backend:
    build: .
    depends_on:
      - db
      - redis  # db, redisê°€ ë¨¼ì € ì‹œì‘ëœ í›„ backend ì‹œì‘

  db:
    image: postgres:15

  redis:
    image: redis:7
```

```mermaid
flowchart LR
    DB[db ì»¨í…Œì´ë„ˆ] --> BE[backend ì»¨í…Œì´ë„ˆ]
    RD[redis ì»¨í…Œì´ë„ˆ] --> BE

    style DB fill:#FFB6C1
    style RD fill:#FFB6C1
    style BE fill:#90EE90
```

> âš ï¸ **ì£¼ì˜**: `depends_on`ì€ ì»¨í…Œì´ë„ˆ **ì‹œì‘ ìˆœì„œ**ë§Œ ë³´ì¥í•©ë‹ˆë‹¤. ì„œë¹„ìŠ¤ê°€ **ì¤€ë¹„(ready)**ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ PostgreSQL ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì–´ë„ DBê°€ ì—°ê²°ì„ ë°›ì„ ì¤€ë¹„ê°€ ì•ˆ ëì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### healthcheck: í—¬ìŠ¤ì²´í¬

ì„œë¹„ìŠ¤ê°€ ì‹¤ì œë¡œ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```yaml
services:
  db:
    image: postgres:15
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 5s
      timeout: 5s
      retries: 5

  backend:
    build: .
    depends_on:
      db:
        condition: service_healthy  # ğŸ‘ˆ í—¬ìŠ¤ì²´í¬ í†µê³¼ í›„ ì‹œì‘
```

### í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬

ê°œë°œ(dev)ê³¼ í”„ë¡œë•ì…˜(prod) ì„¤ì •ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
project/
â”œâ”€â”€ docker-compose.yml          # ê³µí†µ ì„¤ì •
â”œâ”€â”€ docker-compose.dev.yml      # ê°œë°œìš© ì˜¤ë²„ë¼ì´ë“œ
â””â”€â”€ docker-compose.prod.yml     # í”„ë¡œë•ì…˜ìš© ì˜¤ë²„ë¼ì´ë“œ
```

```bash
# ê°œë°œ í™˜ê²½
docker compose -f docker-compose.yml -f docker-compose.dev.yml up

# í”„ë¡œë•ì…˜ í™˜ê²½
docker compose -f docker-compose.yml -f docker-compose.prod.yml up
```

---

## ì‹¤ì „ ì˜ˆì œ: BE + Redis + ì™¸ë¶€ DB

ì†Œê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œ ìì£¼ ì‚¬ìš©í•˜ëŠ” êµ¬ì„±ì…ë‹ˆë‹¤.

```yaml
version: "3.8"

services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: ${DATABASE_URL}  # ì™¸ë¶€ DB (NeonDB ë“±)
      REDIS_URL: redis://redis:6379
    depends_on:
      - redis
    networks:
      - app-network

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    networks:
      - app-network
    command: redis-server --appendonly yes

networks:
  app-network:
    driver: bridge

volumes:
  redis_data:
```

```mermaid
flowchart TB
    subgraph EC2["â˜ï¸ EC2 ì¸ìŠ¤í„´ìŠ¤"]
        subgraph Docker["Docker Network"]
            BE[Backend<br/>:3000]
            RD[Redis<br/>:6379]
        end
    end

    subgraph External["ì™¸ë¶€ ì„œë¹„ìŠ¤"]
        NDB[(NeonDB<br/>PostgreSQL)]
    end

    User["ğŸ‘¤ ì‚¬ìš©ì"] -->|:3000| BE
    BE <-->|ë‚´ë¶€ í†µì‹ | RD
    BE <-->|ì¸í„°ë„·| NDB

    style EC2 fill:#E8F4FD
    style Docker fill:#FFF8DC
    style External fill:#FFE4E1
```

---

## ìì£¼ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´

```bash
# ë¹Œë“œ ë° ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)
docker compose up --build -d

# ë¹Œë“œë§Œ
docker compose build

# ì‹¤í–‰ë§Œ (ì´ë¯¸ ë¹Œë“œëœ ì´ë¯¸ì§€ ì‚¬ìš©)
docker compose up -d

# ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
docker compose logs -f backend

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ì‚­ì œ
docker compose down

# ë³¼ë¥¨ê¹Œì§€ ì‚­ì œ
docker compose down -v

# ë„¤íŠ¸ì›Œí¬ í™•ì¸
docker network ls
docker network inspect app-network

# ë³¼ë¥¨ í™•ì¸
docker volume ls
docker volume inspect redis_data
```

---

## ë§ˆì¹˜ë©°

Docker Composeì˜ í•µì‹¬ì€ í¬íŠ¸ ë§¤í•‘(`í˜¸ìŠ¤íŠ¸:ì»¨í…Œì´ë„ˆ`), ë„¤íŠ¸ì›Œí¬(ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ì»¨í…Œì´ë„ˆë¼ë¦¬ ì„œë¹„ìŠ¤ ì´ë¦„ìœ¼ë¡œ í†µì‹ ), ë³¼ë¥¨(ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ì—ë„ ë°ì´í„° ìœ ì§€)ì…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì´ë¦„ìœ¼ë¡œ í†µì‹ í•œë‹¤ëŠ” ì ê³¼ Named Volumeì€ í•˜ë‹¨ì— ì •ì˜í•´ì•¼ í•œë‹¤ëŠ” ì ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
