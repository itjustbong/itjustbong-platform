---
title: "[Docker] Prismaì™€ Docker: ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿì˜ ì´í•´"
description: "Dockerì—ì„œ Prisma ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿ ë¬¸ì œì™€ í•´ê²° ë°©ë²•"
category: "devops"
tags: ["docker", "prisma", "binary", "alpine", "troubleshooting"]
createdAt: "2026-01-08"
updatedAt: "2026-01-08"
published: true
---

## Prismaì™€ Docker: ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿì˜ ì´í•´

Docker í™˜ê²½ì—ì„œ Prismaë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ì´ëŸ° ì—ëŸ¬ë¥¼ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
Error: Query engine binary for current platform "linux-musl-openssl-3.0.x" 
could not be found.
```

ì´ ì—ëŸ¬ê°€ ì™œ ë°œìƒí•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## ë°”ì´ë„ˆë¦¬(Binary)ë€?

### ê¸°ë³¸ ê°œë…

ë°”ì´ë„ˆë¦¬ëŠ” **CPUê°€ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê¸°ê³„ì–´ë¡œ ëœ íŒŒì¼**ì…ë‹ˆë‹¤.

```mermaid
flowchart LR
    subgraph Source["ì†ŒìŠ¤ ì½”ë“œ"]
        SC["print('Hello')"]
    end

    subgraph Binary["ë°”ì´ë„ˆë¦¬"]
        BN["01001000 01100101<br/>01101100 01101100..."]
    end

    subgraph CPU["CPU"]
        EXEC["ì‹¤í–‰!"]
    end

    Source -->|ì»´íŒŒì¼| Binary -->|ë¡œë“œ| CPU

    style Source fill:#E8F8E8
    style Binary fill:#FFE4E1
    style CPU fill:#E0FFFF
```

### JavaScriptëŠ” ì¸í„°í”„ë¦¬í„° ì–¸ì–´ ì•„ë‹Œê°€ìš”?

ë§ìŠµë‹ˆë‹¤! JavaScript ìì²´ëŠ” ë°”ì´ë„ˆë¦¬ê°€ ì•„ë‹™ë‹ˆë‹¤. í•˜ì§€ë§Œ PrismaëŠ” **ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ë¶€ë¶„ì„ Rustë¡œ ì‘ì„±**í–ˆê³ , ì´ Rust ì½”ë“œê°€ ë°”ì´ë„ˆë¦¬ë¡œ ì»´íŒŒì¼ë©ë‹ˆë‹¤.

```mermaid
flowchart TB
    subgraph Prisma["Prisma êµ¬ì„±"]
        JS["JavaScript/TypeScript<br/>Prisma Client API"]
        QE["Query Engine<br/>(Rust ë°”ì´ë„ˆë¦¬)"]
    end

    subgraph ì™œë°”ì´ë„ˆë¦¬["ì™œ Rust ë°”ì´ë„ˆë¦¬?"]
        P1["âœ… ì„±ëŠ¥: ë„¤ì´í‹°ë¸Œ ìˆ˜ì¤€"]
        P2["âœ… ë©”ëª¨ë¦¬: íš¨ìœ¨ì  ê´€ë¦¬"]
        P3["âœ… SQL íŒŒì‹±, ë³€í™˜ ìµœì í™”"]
    end

    JS -->|í˜¸ì¶œ| QE
    QE --> ì™œë°”ì´ë„ˆë¦¬

    style QE fill:#FFE4E1
    style JS fill:#E8F8E8
```

---

## OSë§ˆë‹¤ ë°”ì´ë„ˆë¦¬ê°€ ë‹¤ë¥¸ ì´ìœ 

### í•µì‹¬ ì§ˆë¬¸

> **Q: ì™œ macOSì—ì„œ ë¹Œë“œí•œ ë°”ì´ë„ˆë¦¬ê°€ Linuxì—ì„œ ì•ˆ ëŒì•„ê°€ë‚˜ìš”?**

### ì„¸ ê°€ì§€ ì´ìœ 

```mermaid
flowchart TB
    subgraph ì´ìœ ["OSë³„ ë°”ì´ë„ˆë¦¬ê°€ ë‹¤ë¥¸ ì´ìœ "]
        R1["1ï¸âƒ£ ì‹œìŠ¤í…œ ì½œ ì°¨ì´"]
        R2["2ï¸âƒ£ ì‹¤í–‰ íŒŒì¼ í¬ë§· ì°¨ì´"]
        R3["3ï¸âƒ£ C ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ì´"]
    end

    R1 --> S1["íŒŒì¼ ì½ê¸°, ë„¤íŠ¸ì›Œí¬ ë“±<br/>OS APIê°€ ë‹¤ë¦„"]
    R2 --> S2["Windows: PE<br/>Linux: ELF<br/>macOS: Mach-O"]
    R3 --> S3["glibc vs musl<br/>(Linux ë‚´ì—ì„œë„ ë‹¤ë¦„!)"]

    style ì´ìœ  fill:#FFF8DC
```

#### 1. ì‹œìŠ¤í…œ ì½œ (System Call) ì°¨ì´

í”„ë¡œê·¸ë¨ì´ OS ê¸°ëŠ¥(íŒŒì¼ ì½ê¸°, ë„¤íŠ¸ì›Œí¬ ë“±)ì„ ì‚¬ìš©í•  ë•Œ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ì´ OSë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤.

```
# íŒŒì¼ ì—´ê¸° ì‹œìŠ¤í…œ ì½œ
Linux:   open()    â†’ ì‹œìŠ¤í…œ ì½œ ë²ˆí˜¸ 2
macOS:   open()    â†’ ì‹œìŠ¤í…œ ì½œ ë²ˆí˜¸ 5
Windows: CreateFile() â†’ ì™„ì „íˆ ë‹¤ë¥¸ API
```

#### 2. ì‹¤í–‰ íŒŒì¼ í¬ë§· ì°¨ì´

ê° OSëŠ” ì‹¤í–‰ íŒŒì¼ì˜ êµ¬ì¡°ê°€ ë‹¤ë¦…ë‹ˆë‹¤.

| OS | ì‹¤í–‰ íŒŒì¼ í¬ë§· | í™•ì¥ì |
|-----|--------------|--------|
| Windows | PE (Portable Executable) | .exe |
| Linux | ELF (Executable and Linkable Format) | ì—†ìŒ |
| macOS | Mach-O | ì—†ìŒ |

#### 3. C ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ì´

í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ C í•¨ìˆ˜ë“¤(`printf`, `malloc` ë“±)ì˜ êµ¬í˜„ì²´ê°€ ë‹¤ë¦…ë‹ˆë‹¤.

```mermaid
flowchart LR
    subgraph Linux["Linux"]
        GLIBC["glibc<br/>(ëŒ€ë¶€ë¶„ì˜ ë°°í¬íŒ)"]
        MUSL["musl<br/>(Alpine Linux)"]
    end

    subgraph íŠ¹ì§•
        GLIBC --> G1["âœ… ê¸°ëŠ¥ í’ë¶€<br/>âŒ ìš©ëŸ‰ í¼"]
        MUSL --> M1["âœ… ê²½ëŸ‰<br/>âŒ glibcì™€ í˜¸í™˜ ì•ˆë¨"]
    end

    style GLIBC fill:#E8F8E8
    style MUSL fill:#FFE4E1
```

---

## Alpine Linuxì™€ musl

### Alpine Linuxë€?

Alpine LinuxëŠ” **ì´ˆê²½ëŸ‰ Linux ë°°í¬íŒ**ì…ë‹ˆë‹¤. Dockerì—ì„œ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

```bash
# ì¼ë°˜ Node.js ì´ë¯¸ì§€
FROM node:20          # ~1GB

# Alpine ê¸°ë°˜ ì´ë¯¸ì§€
FROM node:20-alpine   # ~150MB
```

### ì™œ ë¬¸ì œê°€ ë˜ë‚˜ìš”?

Alpine LinuxëŠ” **glibc ëŒ€ì‹  muslì„ ì‚¬ìš©**í•©ë‹ˆë‹¤. ë”°ë¼ì„œ:

- glibcìš©ìœ¼ë¡œ ë¹Œë“œëœ ë°”ì´ë„ˆë¦¬ â†’ Alpineì—ì„œ âŒ ì‹¤í–‰ ì•ˆë¨
- muslìš©ìœ¼ë¡œ ë¹Œë“œëœ ë°”ì´ë„ˆë¦¬ â†’ Alpineì—ì„œ âœ… ì‹¤í–‰ë¨

```mermaid
flowchart TB
    subgraph ê°œë°œí™˜ê²½["ğŸ’» ê°œë°œ í™˜ê²½ (macOS/Windows)"]
        DEV["Prisma ì„¤ì¹˜<br/>â†’ darwin/windows ë°”ì´ë„ˆë¦¬"]
    end

    subgraph Docker["ğŸ³ Docker (Alpine)"]
        ALP["Alpine Linux<br/>musl ì‚¬ìš©"]
        ERR["âŒ ë°”ì´ë„ˆë¦¬ í˜¸í™˜ ì•ˆë¨!"]
    end

    DEV -->|docker build| Docker
    ALP --> ERR

    style DEV fill:#E8F8E8
    style ERR fill:#FFB6C1
```

---

## ì—ëŸ¬ ë©”ì‹œì§€ ì´í•´í•˜ê¸°

```
Error: Query engine binary for current platform "linux-musl-openssl-3.0.x" 
could not be found.
```

ì´ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë¶„ì„í•´ë³´ë©´:

| ë¶€ë¶„ | ì˜ë¯¸ |
|------|------|
| `linux` | Linux OS |
| `musl` | Alpine Linux (musl ì‚¬ìš©) |
| `openssl-3.0.x` | OpenSSL 3.0.x ë²„ì „ |

ì¦‰, **"Alpine Linux + OpenSSL 3.0ìš© Query Engine ë°”ì´ë„ˆë¦¬ê°€ ì—†ë‹¤"**ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

---

## í•´ê²° ë°©ë²•

### 1. binaryTargets ì„¤ì •

`prisma/schema.prisma` íŒŒì¼ì—ì„œ í•„ìš”í•œ ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿì„ ëª…ì‹œí•©ë‹ˆë‹¤.

```prisma
generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}
```

```mermaid
flowchart LR
    subgraph Targets["binaryTargets"]
        T1["native<br/>ê°œë°œ í™˜ê²½ìš©"]
        T2["linux-musl-openssl-3.0.x<br/>Docker Alpineìš©"]
    end

    T1 --> D1["macOS/Windowsì—ì„œ<br/>ë¡œì»¬ ê°œë°œ ì‹œ ì‚¬ìš©"]
    T2 --> D2["Docker Alpine ì»¨í…Œì´ë„ˆì—ì„œ<br/>ì‚¬ìš©"]

    style T1 fill:#E8F8E8
    style T2 fill:#E0FFFF
```

### 2. ì£¼ìš” ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿ ëª©ë¡

| íƒ€ê²Ÿ | í™˜ê²½ |
|------|------|
| `native` | í˜„ì¬ ê°œë°œ í™˜ê²½ (ìë™ ê°ì§€) |
| `linux-musl-openssl-3.0.x` | Alpine Linux + OpenSSL 3.0 |
| `linux-musl` | Alpine Linux (êµ¬ë²„ì „) |
| `debian-openssl-3.0.x` | Debian/Ubuntu + OpenSSL 3.0 |
| `debian-openssl-1.1.x` | Debian/Ubuntu + OpenSSL 1.1 |
| `rhel-openssl-3.0.x` | RHEL/CentOS + OpenSSL 3.0 |

### 3. í™˜ê²½ë³„ íƒ€ê²Ÿ ì„ íƒ

```mermaid
flowchart TB
    Q1{"Docker ë² ì´ìŠ¤ ì´ë¯¸ì§€?"}
    Q1 -->|node:20-alpine| A1["linux-musl-openssl-3.0.x"]
    Q1 -->|node:20| A2["debian-openssl-3.0.x"]
    Q1 -->|node:20-slim| A3["debian-openssl-3.0.x"]

    style A1 fill:#E0FFFF
    style A2 fill:#E8F8E8
    style A3 fill:#E8F8E8
```

---

## ì‹¤ì „ ì˜ˆì œ

### schema.prisma

```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

model User {
  id    Int    @id @default(autoincrement())
  email String @unique
  name  String?
}
```

### Dockerfile

```dockerfile
# Stage 1: Builder
FROM node:20-alpine AS builder

WORKDIR /app

# Prisma CLIì™€ Client ìƒì„±ì„ ìœ„í•œ ì˜ì¡´ì„±
COPY package*.json ./
COPY prisma ./prisma

RUN npm install

# Prisma Client ìƒì„± (ì¤‘ìš”!)
RUN npx prisma generate

COPY . .
RUN npm run build

# Stage 2: Runner
FROM node:20-alpine AS runner

WORKDIR /app

COPY --from=builder /app/node_modules ./node_modules
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/prisma ./prisma

CMD ["node", "dist/main.js"]
```

> âš ï¸ **ì¤‘ìš”**: `prisma generate`ëŠ” Builder ìŠ¤í…Œì´ì§€ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ëª…ë ¹ì–´ê°€ í˜„ì¬ í™˜ê²½ì— ë§ëŠ” ë°”ì´ë„ˆë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì—ëŸ¬ 1: ë°”ì´ë„ˆë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

```
Error: Query engine binary for current platform "linux-musl-openssl-3.0.x" 
could not be found.
```

**í•´ê²°**: `schema.prisma`ì— í•´ë‹¹ íƒ€ê²Ÿ ì¶”ê°€

```prisma
binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
```

### ì—ëŸ¬ 2: prisma generate ì•ˆ í•¨

```
Error: @prisma/client did not initialize yet. 
Please run "prisma generate" and try to import it again.
```

**í•´ê²°**: Dockerfileì—ì„œ `prisma generate` ì‹¤í–‰

```dockerfile
RUN npx prisma generate
```

### ì—ëŸ¬ 3: OpenSSL ë²„ì „ ë¶ˆì¼ì¹˜

```
Error: libssl.so.1.1: cannot open shared object file
```

**í•´ê²°**: ì˜¬ë°”ë¥¸ OpenSSL ë²„ì „ì˜ íƒ€ê²Ÿ ì‚¬ìš©

```prisma
# OpenSSL 1.1ì¸ ê²½ìš°
binaryTargets = ["native", "linux-musl"]

# OpenSSL 3.0ì¸ ê²½ìš°
binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
```

### í˜„ì¬ í™˜ê²½ í™•ì¸í•˜ê¸°

ì–´ë–¤ ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿì´ í•„ìš”í•œì§€ í™•ì¸í•˜ë ¤ë©´:

```bash
# ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ ì‹¤í–‰
npx prisma -v
```

ì¶œë ¥ ì˜ˆì‹œ:
```
prisma                  : 5.x.x
@prisma/client          : 5.x.x
Computed binaryTarget   : linux-musl-openssl-3.0.x  # ğŸ‘ˆ ì´ê²Œ í•„ìš”í•œ íƒ€ê²Ÿ
```

---

## ì •ë¦¬: í•´ê²° ì²´í¬ë¦¬ìŠ¤íŠ¸

```mermaid
flowchart TB
    Q1["1. schema.prismaì—<br/>binaryTargets ì„¤ì •í–ˆë‚˜ìš”?"]
    Q1 -->|No| A1["binaryTargets ì¶”ê°€"]
    Q1 -->|Yes| Q2

    Q2["2. Docker ë² ì´ìŠ¤ ì´ë¯¸ì§€ì™€<br/>íƒ€ê²Ÿì´ ì¼ì¹˜í•˜ë‚˜ìš”?"]
    Q2 -->|No| A2["ì•Œë§ì€ íƒ€ê²Ÿìœ¼ë¡œ ë³€ê²½"]
    Q2 -->|Yes| Q3

    Q3["3. prisma generateë¥¼<br/>Dockerfileì—ì„œ ì‹¤í–‰í•˜ë‚˜ìš”?"]
    Q3 -->|No| A3["RUN npx prisma generate ì¶”ê°€"]
    Q3 -->|Yes| OK["âœ… ë¬¸ì œ í•´ê²°!"]

    style OK fill:#90EE90
```

### Quick Fix

```prisma
// prisma/schema.prisma
generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}
```

```dockerfile
# Dockerfile
RUN npx prisma generate
```

---

## ë§ˆì¹˜ë©°

Prismaì™€ Dockerë¥¼ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ë°”ì´ë„ˆë¦¬ íƒ€ê²Ÿ ë¬¸ì œëŠ” OS, C ë¼ì´ë¸ŒëŸ¬ë¦¬(glibc/musl), OpenSSL ë²„ì „ì— ë”°ë¼ ë‹¤ë¥¸ ë°”ì´ë„ˆë¦¬ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. `binaryTargets`ì— Docker í™˜ê²½ì— ë§ëŠ” íƒ€ê²Ÿì„ ëª…ì‹œí•˜ê³ , `prisma generate`ë¥¼ Docker ë¹Œë“œ ì‹œ ì‹¤í–‰í•˜ë©´ í•´ê²°ë©ë‹ˆë‹¤.

Alpine ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `linux-musl-openssl-3.0.x`ë¥¼, ì¼ë°˜ Debian ê¸°ë°˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ `debian-openssl-3.0.x`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë‹¤ìŒ ê¸€ì—ì„œëŠ” ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ì˜ ê¸°ë³¸ íŒ¨í„´ì¸ DTO, DAO, Entityë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
