---
title: "[Backend] ëª¨ë…¸ë ˆí¬ì—ì„œ íƒ€ì… ê³µìœ í•˜ê¸°: @repo/types íŒ¨í‚¤ì§€ í™œìš©"
description: "pnpm workspace ëª¨ë…¸ë ˆí¬ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ íƒ€ì…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê³µìœ í•˜ëŠ” ë°©ë²•"
category: "backend"
tags: ["monorepo", "typescript", "pnpm", "workspace", "shared-types"]
createdAt: "2025-12-28"
updatedAt: "2025-12-28"
published: true
---

## ëª¨ë…¸ë ˆí¬ì—ì„œ íƒ€ì… ê³µìœ í•˜ê¸°

ëª¨ë…¸ë ˆí¬ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œë¥¼ í•¨ê»˜ ê´€ë¦¬í•˜ë©´ íƒ€ì…ì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ NestJSë¥¼ ì‚¬ìš©í•˜ë©´ ëª‡ ê°€ì§€ ì œì•½ì´ ìˆìŠµë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ ì–´ë–»ê²Œ í•´ê²°í•˜ëŠ”ì§€ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## ëª¨ë…¸ë ˆí¬ êµ¬ì¡°

```
my-project/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/          # React/Next.js
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ backend/           # NestJS
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared-types/      # ê³µìœ  íƒ€ì… íŒ¨í‚¤ì§€
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ package.json
```

### pnpm-workspace.yaml

```yaml
packages:
  - 'apps/*'
  - 'packages/*'
```

---

## ê³µìœ  íƒ€ì… íŒ¨í‚¤ì§€ ë§Œë“¤ê¸°

### packages/shared-types/package.json

```json
{
  "name": "@repo/shared-types",
  "version": "1.0.0",
  "main": "./src/index.ts",
  "types": "./src/index.ts",
  "scripts": {
    "typecheck": "tsc --noEmit"
  },
  "devDependencies": {
    "typescript": "^5.0.0"
  }
}
```

### packages/shared-types/src/index.ts

```typescript
// User ê´€ë ¨ íƒ€ì…
export interface User {
  id: number;
  email: string;
  name: string;
  createdAt: string;
}

export interface CreateUserRequest {
  email: string;
  name: string;
  password: string;
}

export interface UserResponse {
  id: number;
  email: string;
  name: string;
  createdAt: string;
}

// API Response íƒ€ì…
export interface ApiResponse<T> {
  success: boolean;
  data: T;
  message?: string;
}

export interface PaginatedResponse<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
  totalPages: number;
}
```

---

## í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ê¸°

í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ê³µìœ  íƒ€ì…ì„ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### apps/frontend/package.json

```json
{
  "name": "frontend",
  "dependencies": {
    "@repo/shared-types": "workspace:*"
  }
}
```

### ì‚¬ìš© ì˜ˆì‹œ

```typescript
// apps/frontend/src/api/user.ts
import type { 
  CreateUserRequest, 
  UserResponse, 
  ApiResponse 
} from '@repo/shared-types';

export async function createUser(
  data: CreateUserRequest
): Promise<ApiResponse<UserResponse>> {
  const response = await fetch('/api/users', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data),
  });
  return response.json();
}
```

```mermaid
flowchart LR
    subgraph SharedTypes["ğŸ“¦ @repo/shared-types"]
        T1["CreateUserRequest"]
        T2["UserResponse"]
    end

    subgraph Frontend["ğŸ–¥ï¸ Frontend"]
        F1["api/user.ts"]
        F2["components/UserForm.tsx"]
    end

    T1 --> F1
    T1 --> F2
    T2 --> F1

    style SharedTypes fill:#FFF8DC
    style Frontend fill:#E8F8E8
```

---

## ë°±ì—”ë“œ(NestJS)ì—ì„œì˜ ë¬¸ì œ

### ì™œ ê³µìœ  íƒ€ì…ì„ ê·¸ëŒ€ë¡œ ì“°ê¸° ì–´ë ¤ìš´ê°€?

NestJSì—ì„œ Request DTOëŠ” **class + ë°ì½”ë ˆì´í„°**ê°€ í•„ìš”í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê³µìœ  íŒ¨í‚¤ì§€ì˜ íƒ€ì…ì€ **interface**ì…ë‹ˆë‹¤.

```mermaid
flowchart LR
    subgraph SharedTypes["@repo/shared-types"]
        I["interface CreateUserRequest"]
    end

    subgraph NestJS["NestJS ìš”êµ¬ì‚¬í•­"]
        C["class CreateUserDto<br/>+ @IsString()<br/>+ @IsEmail()"]
    end

    SharedTypes -->|"âŒ í˜¸í™˜ ì•ˆë¨"| NestJS

    style SharedTypes fill:#FFE4E1
    style NestJS fill:#E8F8E8
```

### ë¬¸ì œ ìƒí™©

```typescript
// âŒ ì´ë ‡ê²Œ í•˜ê³  ì‹¶ì§€ë§Œ...
import { CreateUserRequest } from '@repo/shared-types';

// NestJS ValidationPipeê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ!
@Post()
async create(@Body() dto: CreateUserRequest) {
  // interfaceëŠ” ëŸ°íƒ€ì„ì— ì¡´ì¬í•˜ì§€ ì•Šì•„ì„œ ê²€ì¦ ë¶ˆê°€
}
```

```typescript
// âœ… NestJSëŠ” ì´ê²Œ í•„ìš”
class CreateUserDto {
  @IsEmail()
  email: string;

  @IsString()
  @MinLength(2)
  name: string;

  @IsString()
  @MinLength(8)
  password: string;
}
```

---

## í•´ê²° ì „ëµ: Request vs Response ë¶„ë¦¬

### í•µì‹¬ ì•„ì´ë””ì–´

```mermaid
flowchart TB
    subgraph Request["ğŸ“¥ Request (í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„)"]
        R1["BEì—ì„œ classë¡œ ì •ì˜"]
        R2["ìœ íš¨ì„± ê²€ì‚¬ ë°ì½”ë ˆì´í„° í•„ìš”"]
        R3["ê³µìœ  íƒ€ì… âŒ ì‚¬ìš© ì–´ë ¤ì›€"]
    end

    subgraph Response["ğŸ“¤ Response (ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸)"]
        S1["ê³µìœ  íƒ€ì… âœ… ì‚¬ìš© ê°€ëŠ¥"]
        S2["interfaceë¡œ ì¶©ë¶„"]
        S3["FE/BE ë™ì¼ íƒ€ì… ë³´ì¥"]
    end

    style Request fill:#FFE4E1
    style Response fill:#E8F8E8
```

| íƒ€ì… | ê³µìœ  íŒ¨í‚¤ì§€ ì‚¬ìš© | ì´ìœ  |
|------|-----------------|------|
| **Request DTO** | âŒ BEì—ì„œ ë³„ë„ ì •ì˜ | ë°ì½”ë ˆì´í„° í•„ìš” |
| **Response DTO** | âœ… ê³µìœ  íŒ¨í‚¤ì§€ ì‚¬ìš© | interfaceë¡œ ì¶©ë¶„ |
| **ê³µí†µ Enum** | âœ… ê³µìœ  íŒ¨í‚¤ì§€ ì‚¬ìš© | ì–‘ìª½ì—ì„œ ë™ì¼í•˜ê²Œ í•„ìš” |
| **ê³µí†µ ìƒìˆ˜** | âœ… ê³µìœ  íŒ¨í‚¤ì§€ ì‚¬ìš© | ì–‘ìª½ì—ì„œ ë™ì¼í•˜ê²Œ í•„ìš” |

---

## ì‹¤ì „ ì ìš©

### 1. ê³µìœ  íŒ¨í‚¤ì§€ êµ¬ì¡°

```typescript
// packages/shared-types/src/index.ts

// âœ… Response íƒ€ì… (FE/BE ê³µìœ )
export interface UserResponse {
  id: number;
  email: string;
  name: string;
  createdAt: string;
}

export interface PostResponse {
  id: number;
  title: string;
  content: string;
  author: Pick<UserResponse, 'id' | 'name'>;
}

// âœ… ê³µí†µ Enum (FE/BE ê³µìœ )
export enum UserRole {
  ADMIN = 'admin',
  USER = 'user',
  GUEST = 'guest',
}

export enum PostStatus {
  DRAFT = 'draft',
  PUBLISHED = 'published',
  ARCHIVED = 'archived',
}

// âœ… API Response ë˜í¼ (FE/BE ê³µìœ )
export interface ApiResponse<T> {
  success: boolean;
  data: T;
  error?: string;
}
```

### 2. ë°±ì—”ë“œ DTO ì •ì˜

```typescript
// apps/backend/src/user/dto/create-user.dto.ts
import { IsEmail, IsString, MinLength } from 'class-validator';
import { ApiProperty } from '@nestjs/swagger';

// Request DTOëŠ” BEì—ì„œ classë¡œ ì •ì˜
export class CreateUserDto {
  @ApiProperty({ example: 'user@example.com' })
  @IsEmail()
  email: string;

  @ApiProperty({ example: 'í™ê¸¸ë™', minLength: 2 })
  @IsString()
  @MinLength(2)
  name: string;

  @ApiProperty({ minLength: 8 })
  @IsString()
  @MinLength(8)
  password: string;
}
```

```typescript
// apps/backend/src/user/user.service.ts
import type { UserResponse } from '@repo/shared-types';
import { CreateUserDto } from './dto/create-user.dto';

@Injectable()
export class UserService {
  async create(dto: CreateUserDto): Promise<UserResponse> {
    const user = await this.prisma.user.create({
      data: {
        email: dto.email,
        name: dto.name,
        password: await this.hashPassword(dto.password),
      },
    });

    // ResponseëŠ” ê³µìœ  íƒ€ì… ì‚¬ìš©
    return {
      id: user.id,
      email: user.email,
      name: user.name,
      createdAt: user.createdAt.toISOString(),
    };
  }
}
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©

```typescript
// apps/frontend/src/api/user.ts
import type { UserResponse, ApiResponse } from '@repo/shared-types';

interface CreateUserInput {
  email: string;
  name: string;
  password: string;
}

export async function createUser(
  input: CreateUserInput
): Promise<ApiResponse<UserResponse>> {
  const res = await fetch('/api/users', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(input),
  });
  return res.json();
}
```

---

## ë°ì´í„° íë¦„ ì •ë¦¬

```mermaid
sequenceDiagram
    participant FE as Frontend
    participant BE as Backend (NestJS)
    participant Types as @repo/shared-types

    Note over FE,Types: Request íë¦„
    FE->>FE: CreateUserInput (ìì²´ íƒ€ì…)
    FE->>BE: POST /api/users (JSON)
    BE->>BE: CreateUserDto (class + ë°ì½”ë ˆì´í„°)
    BE->>BE: ValidationPipe ê²€ì¦

    Note over FE,Types: Response íë¦„
    BE->>Types: UserResponse íƒ€ì… import
    BE->>FE: Response (JSON)
    FE->>Types: UserResponse íƒ€ì… import
    FE->>FE: íƒ€ì… ì•ˆì „í•˜ê²Œ ì‚¬ìš©
```

---

## Docker ë¹Œë“œ ì‹œ ì£¼ì˜ì‚¬í•­

ëª¨ë…¸ë ˆí¬ì—ì„œ Docker ë¹Œë“œ ì‹œ ë‚´ë¶€ íŒ¨í‚¤ì§€ ì˜ì¡´ì„±ì„ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

### Dockerfile

```dockerfile
FROM node:20-alpine AS builder

RUN corepack enable && corepack prepare pnpm@10.25.0 --activate

WORKDIR /app

# workspace ì„¤ì • íŒŒì¼ ë³µì‚¬
COPY pnpm-lock.yaml pnpm-workspace.yaml ./

# í•„ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì˜ package.json ë³µì‚¬
COPY apps/backend/package.json ./apps/backend/
COPY packages/shared-types/package.json ./packages/shared-types/

# ì˜ì¡´ì„± ì„¤ì¹˜
RUN pnpm install --frozen-lockfile

# ì†ŒìŠ¤ì½”ë“œ ë³µì‚¬
COPY apps/backend ./apps/backend
COPY packages/shared-types ./packages/shared-types

# ë¹Œë“œ
RUN pnpm --filter backend build

# ... (ìƒëµ)
```

### í•µì‹¬ í¬ì¸íŠ¸

```mermaid
flowchart LR
    subgraph Copy["Docker COPY í•„ìˆ˜ íŒŒì¼"]
        A["pnpm-lock.yaml"]
        B["pnpm-workspace.yaml"]
        C["apps/backend/package.json"]
        D["packages/shared-types/package.json"]
    end

    subgraph Reason["ì´ìœ "]
        A --> R1["ì˜ì¡´ì„± ë²„ì „ ì ê¸ˆ"]
        B --> R2["ì›Œí¬ìŠ¤í˜ì´ìŠ¤ êµ¬ì¡°"]
        C --> R3["ì•± ì˜ì¡´ì„±"]
        D --> R4["ë‚´ë¶€ íŒ¨í‚¤ì§€ ì˜ì¡´ì„±"]
    end
```

---

## ê³ ê¸‰: íƒ€ì… ë™ê¸°í™” ê²€ì¦

ê³µìœ  íƒ€ì…ê³¼ ì‹¤ì œ API ì‘ë‹µì´ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### satisfies í‚¤ì›Œë“œ í™œìš©

```typescript
// apps/backend/src/user/user.service.ts
import type { UserResponse } from '@repo/shared-types';

@Injectable()
export class UserService {
  async findOne(id: number): Promise<UserResponse> {
    const user = await this.prisma.user.findUnique({
      where: { id },
    });

    // satisfiesë¡œ íƒ€ì… ì¼ì¹˜ ê²€ì¦
    return {
      id: user.id,
      email: user.email,
      name: user.name,
      createdAt: user.createdAt.toISOString(),
    } satisfies UserResponse;
  }
}
```

### ì¥ì 

- ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì… ë¶ˆì¼ì¹˜ ê°ì§€
- Response êµ¬ì¡° ë³€ê²½ ì‹œ ì–‘ìª½ì—ì„œ ì—ëŸ¬ ë°œìƒ
- API ë¬¸ì„œ ì—†ì´ë„ íƒ€ì…ìœ¼ë¡œ ê³„ì•½ ìœ ì§€

---

## íŒ¨í„´ ì •ë¦¬

```mermaid
flowchart TB
    subgraph Shared["ğŸ“¦ @repo/shared-types"]
        direction LR
        R["Response íƒ€ì…"]
        E["Enum"]
        C["ìƒìˆ˜"]
    end

    subgraph Backend["ğŸ”§ Backend"]
        REQ["Request DTO<br/>(class + decorator)"]
        RES["Response<br/>(ê³µìœ  íƒ€ì… ì‚¬ìš©)"]
    end

    subgraph Frontend["ğŸ–¥ï¸ Frontend"]
        INPUT["Input íƒ€ì…<br/>(ìì²´ ì •ì˜ or ê³µìœ )"]
        OUTPUT["Response<br/>(ê³µìœ  íƒ€ì… ì‚¬ìš©)"]
    end

    R --> RES
    R --> OUTPUT
    E --> Backend
    E --> Frontend
    C --> Backend
    C --> Frontend

    style Shared fill:#FFF8DC
    style Backend fill:#FFE4E1
    style Frontend fill:#E8F8E8
```

---

## ë§ˆì¹˜ë©°

ëª¨ë…¸ë ˆí¬ì—ì„œ íƒ€ì… ê³µìœ ì˜ í•µì‹¬ì€ Response íƒ€ì…ê³¼ Enum/ìƒìˆ˜ëŠ” ê³µìœ  íŒ¨í‚¤ì§€ì—ì„œ ì •ì˜í•˜ê³ , Request DTOëŠ” ë°±ì—”ë“œì—ì„œ class + ë°ì½”ë ˆì´í„°ë¡œ ë³„ë„ ì •ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Docker ë¹Œë“œ ì‹œì—ëŠ” ë‚´ë¶€ íŒ¨í‚¤ì§€ ì˜ì¡´ì„± íŒŒì¼ ë³µì‚¬ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.

Response íƒ€ì…ì„ ê³µìœ í•˜ë©´ ë°±ì—”ë“œì—ì„œ ì‘ë‹µ êµ¬ì¡°ê°€ ë³€ê²½ë  ë•Œ í”„ë¡ íŠ¸ì—”ë“œì—ì„œë„ ì¦‰ì‹œ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ë²„ê·¸ë¥¼ ì‚¬ì „ì— ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
