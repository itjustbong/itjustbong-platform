---
title: "[Turborepo] 1. 시작하기 (Getting Started)"
description: "Turborepo를 처음 시작하는 방법부터 기존 프로젝트에 적용하는 방법"
category: "architecture"
tags: ["turborepo", "monorepo", "build", "optimization"]
createdAt: "2025-12-15"
updatedAt: "2025-12-15"
published: true
---

## Turborepo 시작하기

Turborepo는 JavaScript/TypeScript 모노레포를 위한 빌드 시스템입니다. 새 프로젝트를 시작하는 방법과 기존 프로젝트에 적용하는 방법을 정리합니다.

## 새 프로젝트 시작하기

### 1. 초기 템플릿 설치

공식 템플릿으로 시작하는 게 가장 빠릅니다.

```bash
pnpm dlx create-turbo@latest
```

이 명령어를 실행하면 대화형 프롬프트가 나타나며, 프로젝트 이름과 패키지 매니저를 선택할 수 있습니다. 템플릿에는 이미 설정된 워크스페이스 구조와 `turbo.json` 설정이 포함되어 있습니다.

### 2. Turbo CLI 설치

Turbo 명령어를 전역으로 사용하려면 다음과 같이 설치합니다.

```bash
pnpm add turbo --global
```

설치 후 사용할 수 있는 주요 명령어들:

- **`turbo build`**: 의존 관계를 고려하여 모든 패키지를 순차적으로 빌드합니다.
- **`turbo build --filter=web --dry`**: `web` 패키지 빌드 시 실행될 작업들을 미리 확인합니다. 실제로 실행하지는 않습니다.
- **`turbo generate`**: 새로운 패키지나 컴포넌트를 생성할 때 사용하는 코드 생성 도구입니다.

### 3. 버전 고정하기

팀 협업 시 모든 개발자가 동일한 Turbo 버전을 사용하도록 하려면, 로컬 의존성으로 추가하는 것이 좋습니다.

```bash
pnpm add turbo --save-dev --ignore-workspace-root-check
```

이렇게 하면 `package.json`에 명시된 버전이 전역 설치보다 우선적으로 사용됩니다.

## 기존 프로젝트에 Turborepo 적용하기

이미 운영 중인 모노레포가 있다면, 다음 단계를 따라 Turborepo를 도입할 수 있습니다.

### 1단계: Turbo 설치

루트 디렉토리에서 Turbo를 개발 의존성으로 설치합니다.

```bash
pnpm add turbo --save-dev --ignore-workspace-root-check
```

### 2단계: turbo.json 파일 생성

프로젝트 루트에 `turbo.json` 파일을 생성하고 태스크를 정의합니다.

```json
{
  "$schema": "https://turborepo.com/schema.json",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**", "dist/**"]
    },
    "check-types": {
      "dependsOn": ["^check-types"]
    },
    "dev": {
      "persistent": true,
      "cache": false
    }
  }
}
```

**주요 설정 설명:**

- **`dependsOn: ["^build"]`**: `^` 기호는 "의존하는 패키지들의"라는 의미입니다. 현재 패키지를 빌드하기 전에 의존하는 모든 패키지의 빌드가 먼저 완료되어야 합니다.
- **`outputs`**: 빌드 결과물이 저장되는 디렉토리를 지정합니다. Turbo는 이 파일들을 캐싱합니다.
- **`persistent: true`**: dev 서버처럼 계속 실행되는 태스크에 사용합니다.
- **`cache: false`**: dev 태스크는 캐싱하지 않습니다.

### 3단계: TypeScript 타입 체크 스크립트 추가

Next.js나 다른 TypeScript 프로젝트의 경우, 각 패키지의 `package.json`에 타입 체크 스크립트를 추가합니다.

```json
// apps/web/package.json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "check-types": "tsc --noEmit"
  }
}
```

```json
// packages/math/package.json
{
  "scripts": {
    "build": "tsc",
    "check-types": "tsc --noEmit"
  }
}
```

### 4단계: 패키지 매니저 버전 명시

`package.json`에 사용 중인 패키지 매니저와 버전을 명시합니다.

```json
// package.json
{
  "name": "my-monorepo",
  "private": true,
  "packageManager": "pnpm@9.0.0",
  "scripts": {
    "build": "turbo run build",
    "dev": "turbo run dev",
    "check-types": "turbo run check-types"
  }
}
```

### 5단계: 워크스페이스 설정 확인

패키지 매니저의 워크스페이스 설정이 올바른지 확인합니다.

```yaml
# pnpm-workspace.yaml
packages:
  - "apps/*"
  - "packages/*"
```

### 6단계: Turbo로 빌드 실행

이제 Turbo를 사용하여 여러 태스크를 동시에 실행할 수 있습니다.

```bash
turbo build check-types
```

이 명령어는 모든 워크스페이스의 `build`와 `check-types` 스크립트를 의존성 순서에 따라 실행합니다.

**실행 예시:**

```
• Packages in scope: @repo/math, web
• Running build, check-types in 2 packages
• Remote caching disabled

@repo/math:build: cache hit, replaying logs [1.2s]
@repo/math:check-types: cache hit, replaying logs [0.8s]
web:build: cache miss, executing [12.3s]
web:check-types: cache miss, executing [2.1s]

Tasks:    4 successful, 4 total
Cached:   2 cached, 4 total
Time:     14.5s
```

### 7단계: 캐싱 확인

코드를 변경하지 않고 동일한 명령어를 다시 실행해봅니다.

```bash
turbo check-types build
```

Turbo는 이전 실행 결과를 캐싱했기 때문에 거의 즉시 완료됩니다.

```
• Packages in scope: @repo/math, web
• Running check-types, build in 2 packages

@repo/math:check-types: cache hit, replaying logs [0.1s]
@repo/math:build: cache hit, replaying logs [0.1s]
web:check-types: cache hit, replaying logs [0.1s]
web:build: cache hit, replaying logs [0.1s]

Tasks:    4 successful, 4 total
Cached:   4 cached, 4 total
Time:     0.4s >>> FULL TURBO
```

### 8단계: 개발 서버 실행

여러 패키지의 개발 서버를 동시에 실행할 수 있습니다.

```bash
turbo dev
```

이 명령어는 모든 워크스페이스의 `dev` 스크립트를 병렬로 실행합니다. 예를 들어, `apps/web`의 Next.js 개발 서버와 다른 패키지의 watch 모드를 동시에 시작할 수 있습니다.

## 에디터 통합

### JSON Schema 자동완성

`turbo.json` 파일에 스키마를 추가하면 에디터에서 자동완성과 유효성 검사를 받을 수 있습니다.

```json
{
  "$schema": "https://turborepo.com/schema.json",
  "tasks": {
    // 자동완성 지원
  }
}
```

로컬 스키마를 사용하려면:

```json
{
  "$schema": "./node_modules/turbo/schema.json",
  "tasks": {}
}
```

### VS Code 확장 프로그램

자동완성과 린팅 기능이 필요하면 공식 VS Code 확장 프로그램을 설치합니다.

**Turbo LSP (Language Server Protocol)**

- 설치: [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=Vercel.turbo-vsc)
- 기능:
  - `turbo.json` 설정 자동완성
  - 실시간 오류 검사
  - 태스크 정의로 빠르게 이동
  - 인라인 문서 표시

## 실전 예제: 현재 프로젝트 구조

현재 워크스페이스를 예로 들어보겠습니다.

```
.
├── apps/
│   └── web/              # Next.js 애플리케이션
│       ├── app/
│       ├── package.json
│       └── tsconfig.json
├── packages/
│   └── math/             # 공유 유틸리티 라이브러리
│       ├── src/
│       │   ├── add.ts
│       │   └── subtract.ts
│       ├── package.json
│       └── tsconfig.json
├── turbo.json
├── package.json
└── pnpm-workspace.yaml
```

`web` 앱이 `math` 패키지를 의존하는 경우, `turbo build`를 실행하면:

1. 먼저 `packages/math`가 빌드됩니다.
2. 그 다음 `apps/web`이 빌드됩니다.

이러한 의존성 순서는 자동으로 감지되며, `turbo.json`의 `dependsOn: ["^build"]` 설정에 의해 보장됩니다.

## 유용한 팁

### 특정 패키지만 실행하기

```bash
# web 패키지만 빌드
turbo build --filter=web

# math 패키지와 그것에 의존하는 모든 패키지 빌드
turbo build --filter=math...
```

### 변경된 패키지만 실행하기

```bash
# git에서 변경된 패키지만 빌드
turbo build --filter=[HEAD^1]
```

### 캐시 무시하기

```bash
# 캐시를 사용하지 않고 강제로 다시 실행
turbo build --force
```

## 다음 단계

기본 사용법을 익혔다면 캐싱 전략, 파이프라인 구성, 필터링, CI/CD 통합 등을 살펴보면 됩니다.

Turborepo의 캐싱과 병렬 실행은 모노레포 빌드 속도 개선에 효과적입니다.
