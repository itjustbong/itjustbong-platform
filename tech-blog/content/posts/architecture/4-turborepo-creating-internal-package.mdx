---
title: "[Turborepo] 4. ë‚´ë¶€ íŒ¨í‚¤ì§€ ë§Œë“¤ê¸° (Creating an Internal Package)"
description: "Turborepo ë‚´ë¶€ íŒ¨í‚¤ì§€ ìƒì„± ë°©ë²•ê³¼ ëª¨ë²” ì‚¬ë¡€"
category: "architecture"
tags: ["turborepo", "monorepo", "build", "optimization"]
createdAt: "2025-12-18"
updatedAt: "2025-12-18"
published: true
---

## Turborepo ë‚´ë¶€ íŒ¨í‚¤ì§€ ë§Œë“¤ê¸°

ë‚´ë¶€ íŒ¨í‚¤ì§€(Internal Package)ëŠ” ëª¨ë…¸ë ˆí¬ë¥¼ êµ¬ì„±í•˜ëŠ” í•µì‹¬ ë¹Œë”© ë¸”ë¡ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ë©´ Turborepoê°€ `package.json`ì„ ê¸°ë°˜ìœ¼ë¡œ ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ êµ¬ì„±í•˜ê³  ë¹Œë“œ ìˆœì„œë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

ë‚´ë¶€ íŒ¨í‚¤ì§€ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤.

## ë‚´ë¶€ íŒ¨í‚¤ì§€ ìƒì„±í•˜ê¸°

ìˆ˜í•™ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€(`@repo/math`)ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ì— ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì˜ˆì‹œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 1ë‹¨ê³„: í´ë” ìƒì„±

```bash
mkdir -p packages/math/src
cd packages/math
```

ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì •(`pnpm-workspace.yaml`)ì— `packages/*`ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ë©´, ì´ í´ë”ëŠ” ìë™ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¡œ ì¸ì‹ë©ë‹ˆë‹¤.

### 2ë‹¨ê³„: package.json ì‘ì„±

íŒ¨í‚¤ì§€ì˜ ë©”íƒ€ë°ì´í„°ì™€ ì§„ì…ì ì„ ì •ì˜í•©ë‹ˆë‹¤.

```json
// packages/math/package.json
{
  "name": "@repo/math",
  "type": "module",
  "scripts": {
    "dev": "tsc --watch",
    "build": "tsc"
  },
  "exports": {
    "./add": {
      "types": "./src/add.ts",
      "default": "./dist/add.js"
    },
    "./subtract": {
      "types": "./src/subtract.ts",
      "default": "./dist/subtract.js"
    }
  },
  "devDependencies": {
    "@repo/typescript-config": "workspace:*",
    "typescript": "latest"
  }
}
```

**ê° í•„ë“œ ì„¤ëª…:**

#### name: íŒ¨í‚¤ì§€ ì‹ë³„ì

```json
"name": "@repo/math"
```

- ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ ì´ ì´ë¦„ìœ¼ë¡œ importí•©ë‹ˆë‹¤.
- `@repo/` ìŠ¤ì½”í”„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì™¸ë¶€ íŒ¨í‚¤ì§€ì™€ êµ¬ë¶„í•©ë‹ˆë‹¤.
- ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë‚´ì—ì„œ ê³ ìœ í•´ì•¼ í•©ë‹ˆë‹¤.

#### exports: ì§„ì…ì  ì •ì˜

```json
"exports": {
  "./add": {
    "types": "./src/add.ts",
    "default": "./dist/add.js"
  }
}
```

- ë‹¤ë¥¸ íŒ¨í‚¤ì§€ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²½ë¡œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í•©ë‹ˆë‹¤.
- `types`: TypeScript íƒ€ì… ì •ì˜ íŒŒì¼ ìœ„ì¹˜
- `default`: ì‹¤ì œ JavaScript íŒŒì¼ ìœ„ì¹˜

**ì‚¬ìš© ì˜ˆì‹œ:**

```typescript
// apps/web/app/page.tsx
import { add } from "@repo/math/add"; // âœ… ê°€ëŠ¥
import { subtract } from "@repo/math/subtract"; // âœ… ê°€ëŠ¥
import { multiply } from "@repo/math/multiply"; // âŒ exportsì— ì—†ìŒ
```

#### devDependencies: ê°œë°œ ì˜ì¡´ì„±

```json
"devDependencies": {
  "@repo/typescript-config": "workspace:*",
  "typescript": "latest"
}
```

- **ë‚´ë¶€ íŒ¨í‚¤ì§€ë„ devDependenciesì— í¬í•¨ ê°€ëŠ¥**: `@repo/typescript-config`ëŠ” ê³µìœ  TypeScript ì„¤ì • íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.
- **ë¹Œë“œ ìˆœì„œ ìë™ ê²°ì •**: Turborepoê°€ ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ ë¶„ì„í•˜ì—¬ ë¹Œë“œ ìˆœì„œë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

```
ë¹Œë“œ ìˆœì„œ:
1. @repo/typescript-config (ë¨¼ì €)
2. @repo/math (ë‚˜ì¤‘ì—)
```

### 3ë‹¨ê³„: tsconfig.json ì„¤ì •

TypeScript ì»´íŒŒì¼ ì„¤ì •ì„ ì •ì˜í•©ë‹ˆë‹¤.

```json
// packages/math/tsconfig.json
{
  "extends": "@repo/typescript-config/base.json",
  "compilerOptions": {
    "outDir": "dist",
    "rootDir": "src"
  },
  "include": ["src"],
  "exclude": ["node_modules", "dist"]
}
```

**ê° í•„ë“œ ì„¤ëª…:**

#### extends: ê³µìœ  ì„¤ì • ìƒì†

```json
"extends": "@repo/typescript-config/base.json"
```

ê³µìœ  TypeScript ì„¤ì •ì„ ìƒì†ë°›ìŠµë‹ˆë‹¤. ì‹¤ì œ base.json ë‚´ìš©:

```json
// packages/typescript-config/base.json
{
  "compilerOptions": {
    "declaration": true,
    "declarationMap": true,
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true,
    "target": "ES2022",
    "module": "NodeNext"
  }
}
```

#### outDir: ë¹Œë“œ ê²°ê³¼ë¬¼ ìœ„ì¹˜

```json
"outDir": "dist"
```

TypeScript ì»´íŒŒì¼ ê²°ê³¼ê°€ ì €ì¥ë  ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.

```
packages/math/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ add.ts
â”‚   â””â”€â”€ subtract.ts
â””â”€â”€ dist/              â† ë¹Œë“œ ê²°ê³¼ë¬¼
    â”œâ”€â”€ add.js
    â”œâ”€â”€ add.d.ts
    â”œâ”€â”€ subtract.js
    â””â”€â”€ subtract.d.ts
```

#### rootDir: ì†ŒìŠ¤ ë£¨íŠ¸ ë””ë ‰í† ë¦¬

```json
"rootDir": "src"
```

ì¶œë ¥ íŒŒì¼ì˜ ë””ë ‰í† ë¦¬ êµ¬ì¡°ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

**rootDirê°€ ì—†ì„ ë•Œ:**

```
src/
â”œâ”€â”€ add.ts
â”œâ”€â”€ subtract.ts
â””â”€â”€ utils/
    â””â”€â”€ helper.ts

ì»´íŒŒì¼ í›„ (rootDir ì—†ìŒ) âŒ
dist/
â””â”€â”€ src/              â† src í´ë”ê°€ ê·¸ëŒ€ë¡œ í¬í•¨ë¨!
    â”œâ”€â”€ add.js
    â”œâ”€â”€ subtract.js
    â””â”€â”€ utils/
        â””â”€â”€ helper.js
```

**rootDir: "src" ì„¤ì • í›„:**

```
src/
â”œâ”€â”€ add.ts
â”œâ”€â”€ subtract.ts
â””â”€â”€ utils/
    â””â”€â”€ helper.ts

ì»´íŒŒì¼ í›„ (rootDir: "src") âœ…
dist/
â”œâ”€â”€ add.js            â† src í´ë” ì œê±°, ë‚´ë¶€ êµ¬ì¡°ë§Œ ìœ ì§€
â”œâ”€â”€ subtract.js
â””â”€â”€ utils/
    â””â”€â”€ helper.js
```

ì´ë ‡ê²Œ í•˜ë©´ `package.json`ì˜ `exports`ì—ì„œ `./dist/add.js`ë¡œ ì •í™•íˆ ì°¸ì¡°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### include/exclude: ì»´íŒŒì¼ ëŒ€ìƒ

```json
"include": ["src"],
"exclude": ["node_modules", "dist"]
```

- `include`: ì»´íŒŒì¼í•  íŒŒì¼/í´ë”
- `exclude`: ì œì™¸í•  íŒŒì¼/í´ë”
- **ì£¼ì˜**: ì´ í•„ë“œë“¤ì€ `extends`ë¡œ ìƒì†ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê° íŒ¨í‚¤ì§€ì—ì„œ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤.

### 4ë‹¨ê³„: ì†ŒìŠ¤ ì½”ë“œ ì‘ì„±

ì‹¤ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

```typescript
// packages/math/src/add.ts
export const add = (a: number, b: number) => a + b;
```

```typescript
// packages/math/src/subtract.ts
export const subtract = (a: number, b: number) => a - b;
```

ê°„ë‹¨í•˜ì§€ë§Œ ëª…í™•í•œ ë‹¨ì¼ ì±…ì„ í•¨ìˆ˜ë“¤ì…ë‹ˆë‹¤.

### 5ë‹¨ê³„: ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ìš©í•˜ê¸°

ì´ì œ `web` ì•±ì—ì„œ `@repo/math` íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.

#### ì˜ì¡´ì„± ì¶”ê°€

```json
// apps/web/package.json
{
  "dependencies": {
    "@repo/math": "workspace:*",
    "@repo/ui": "workspace:*",
    "next": "^16.0.1",
    "react": "^19.2.0"
  }
}
```

```bash
# ë˜ëŠ” ëª…ë ¹ì–´ë¡œ ì¶”ê°€
pnpm add @repo/math --filter web
```

#### ì½”ë“œì—ì„œ import

```typescript
// apps/web/app/page.tsx
import { add } from '@repo/math/add';
import { subtract } from '@repo/math/subtract';

export default function Page() {
  const sum = add(10, 5);        // 15
  const diff = subtract(10, 5);  // 5

  return (
    <div>
      <p>10 + 5 = {sum}</p>
      <p>10 - 5 = {diff}</p>
    </div>
  );
}
```

### 6ë‹¨ê³„: turbo.json ì„¤ì •

Turborepoê°€ ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ìºì‹±í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

```json
// turbo.json
{
  "$schema": "https://turborepo.com/schema.json",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [
        ".next/**", // Next.js ì•±ì˜ ë¹Œë“œ ê²°ê³¼
        "!.next/cache/**", // ìºì‹œ í´ë”ëŠ” ì œì™¸
        "dist/**" // TypeScript ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë¹Œë“œ ê²°ê³¼
      ]
    }
  }
}
```

**ê° í•„ë“œ ì„¤ëª…:**

#### dependsOn: ì˜ì¡´ì„± ê¸°ë°˜ ë¹Œë“œ ìˆœì„œ

```json
"dependsOn": ["^build"]
```

- `^build`: "ì˜ì¡´í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì˜ buildë¥¼ ë¨¼ì € ì‹¤í–‰í•´"
- Turborepoê°€ ìë™ìœ¼ë¡œ ìˆœì„œë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

```
ì‹¤í–‰ ìˆœì„œ:
1. @repo/math:build (ì˜ì¡´ì„± ì—†ìŒ)
2. web:build (@repo/mathì— ì˜ì¡´)
```

#### outputs: ìºì‹±í•  íŒŒì¼

```json
"outputs": [
  ".next/**",
  "!.next/cache/**",
  "dist/**"
]
```

- ë¹Œë“œ ê²°ê³¼ë¬¼ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.
- `!`ë¡œ ì‹œì‘í•˜ë©´ ì œì™¸ íŒ¨í„´ì…ë‹ˆë‹¤.

## outputsê°€ ì¤‘ìš”í•œ ì´ìœ 

`outputs` ì„¤ì •ì€ Turborepo ìºì‹±ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì´ ì„¤ì •ì´ ì—†ìœ¼ë©´ ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### outputsê°€ ì—†ì„ ë•Œì˜ ë¬¸ì œ

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì²« ë²ˆì§¸ ë¹Œë“œ

```bash
$ turbo build

@repo/math:build
  â‘  í•´ì‹œ ê³„ì‚°: "abc123"
  â‘¡ ìºì‹œ í™•ì¸: ì—†ìŒ (ìƒˆë¡œìš´ í™˜ê²½)
  â‘¢ ì‹¤ì œ ë¹Œë“œ: tsc ì‹¤í–‰
  â‘£ dist/ ìƒì„± âœ“
  â‘¤ outputs: [] (ë¹„ì–´ìˆìŒ)
  â†’ ìºì‹œì— ì•„ë¬´ê²ƒë„ ì €ì¥ ì•ˆí•¨! âš ï¸

web:build
  â†’ dist/add.js ì°¾ìŒ âœ“
  â†’ ë¹Œë“œ ì„±ê³µ
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì½”ë“œ ìˆ˜ì • í›„ ë¹Œë“œ

```bash
# add.ts ìˆ˜ì •
$ turbo build

@repo/math:build
  â‘  í•´ì‹œ ê³„ì‚°: "xyz789" (ë³€ê²½ë¨)
  â‘¡ ìºì‹œ í™•ì¸: ì—†ìŒ
  â‘¢ ì‹¤ì œ ë¹Œë“œ: tsc ì‹¤í–‰
  â‘£ dist/ ì¬ìƒì„± âœ“
  â‘¤ outputs: [] (ë¹„ì–´ìˆìŒ)
  â†’ ìºì‹œì— ì•„ë¬´ê²ƒë„ ì €ì¥ ì•ˆí•¨! âš ï¸
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦¼ (ë¬¸ì œ ë°œìƒ!)

```bash
# ì½”ë“œë¥¼ ì›ë˜ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦¼
$ git checkout HEAD~1

# í˜„ì¬ ìƒíƒœ:
# - src/add.ts: ì›ë˜ ë²„ì „ìœ¼ë¡œ ë³µêµ¬ âœ“
# - dist/add.js: ì—¬ì „íˆ ìƒˆ ë²„ì „ (íŒŒì¼ì´ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŒ) âš ï¸

$ turbo build

@repo/math:build
  â‘  í•´ì‹œ ê³„ì‚°: "abc123" (ì²« ë²ˆì§¸ì™€ ë™ì¼!)
  â‘¡ ìºì‹œ í™•ì¸: ì—†ìŒ! (outputsì— ì €ì¥ ì•ˆí–ˆìœ¼ë‹ˆê¹Œ)
  â‘¢ ì†ŒìŠ¤ ë³€ê²½ ì—†ìŒ â†’ ë¹Œë“œ ê±´ë„ˆë›°ê¸°
  â‘£ dist/ ë³µì› ì‹œë„: outputsê°€ ë¹„ì–´ìˆì–´ì„œ ë³µì› ì•ˆí•¨
  â‘¤ ê²°ê³¼: dist/add.jsëŠ” ì—¬ì „íˆ ìƒˆ ë²„ì „! âš ï¸

web:build
  â†’ ì˜ëª»ëœ ë²„ì „ì˜ dist/add.js ì‚¬ìš©
  â†’ ë²„ê·¸ ë°œìƒ! ğŸ›
```

### outputsê°€ ìˆì„ ë•Œì˜ ì •ìƒ ë™ì‘

```json
"outputs": ["dist/**"]
```

#### ë™ì¼í•œ ì‹œë‚˜ë¦¬ì˜¤ 3 ì¬í˜„

```bash
$ git checkout HEAD~1
$ turbo build

@repo/math:build
  â‘  í•´ì‹œ ê³„ì‚°: "abc123"
  â‘¡ ìºì‹œ í™•ì¸: ìˆìŒ! (ì²« ë¹Œë“œ ë•Œ ì €ì¥í–ˆìŒ)
  â‘¢ ìºì‹œì—ì„œ dist/ ë³µì› âœ“
  â‘£ ê²°ê³¼: ì˜¬ë°”ë¥¸ ë²„ì „ì˜ dist/add.js ì‚¬ìš© âœ“

web:build
  â†’ ì˜¬ë°”ë¥¸ ë²„ì „ ì‚¬ìš©
  â†’ ì •ìƒ ë™ì‘ âœ“
```

### ìºì‹± ë™ì‘ ì›ë¦¬

TurborepoëŠ” ì†ŒìŠ¤ ì½”ë“œì˜ í•´ì‹œ ê°’ìœ¼ë¡œ ìºì‹±ì„ íŒë‹¨í•©ë‹ˆë‹¤.

```
ìºì‹œ í‚¤ = hash(ì†ŒìŠ¤ ì½”ë“œ + ì˜ì¡´ì„± + í™˜ê²½ ë³€ìˆ˜)
```

**ìºì‹œ íˆíŠ¸ ì‹œ:**

1. ê¸°ì¡´ `dist/` í´ë” ë¬´ì‹œ
2. ìºì‹œì—ì„œ `outputs`ì— ëª…ì‹œëœ íŒŒì¼ë“¤ì„ ë³µì›
3. ë®ì–´ì“°ê¸°

**ì´ë ‡ê²Œ ë™ì‘í•˜ëŠ” ì´ìœ :**

- **ì¼ê´€ì„± ë³´ì¥**: ì†ŒìŠ¤ ì½”ë“œì™€ ë¹Œë“œ ê²°ê³¼ë¬¼ì´ í•­ìƒ ì¼ì¹˜
- **ë¸Œëœì¹˜ ì „í™˜ ì•ˆì „**: git ë¸Œëœì¹˜ë¥¼ ë³€ê²½í•´ë„ ì˜¬ë°”ë¥¸ ë¹Œë“œ ê²°ê³¼ë¬¼ ì‚¬ìš©
- **íŒ€ í˜‘ì—…**: ë‹¤ë¥¸ ê°œë°œìì˜ ìºì‹œë¥¼ ê³µìœ í•´ë„ ì •í™•í•œ ê²°ê³¼ë¬¼ ë³´ì¥

## ë¹Œë“œ ì‹¤í–‰ ë° í™•ì¸

ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ë¹Œë“œë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤.

```bash
$ turbo build

â€¢ Packages in scope: @repo/math, web
â€¢ Running build in 2 packages
â€¢ Remote caching disabled

@repo/math:build: cache miss, executing [1.2s]
@repo/math:build:
@repo/math:build: > @repo/math@0.0.0 build
@repo/math:build: > tsc
@repo/math:build:

web:build: cache miss, executing [8.3s]
web:build:
web:build: > web@0.1.0 build
web:build: > next build
web:build:
web:build:    âœ“ Creating an optimized production build
web:build:    âœ“ Compiled successfully

Tasks:    2 successful, 2 total
Cached:   0 cached, 2 total
Time:     9.5s
```

**ë¹Œë“œ ìˆœì„œ í™•ì¸:**

1. `@repo/math:build` ë¨¼ì € ì‹¤í–‰
2. `web:build` ë‚˜ì¤‘ì— ì‹¤í–‰ (mathì— ì˜ì¡´)

**ìƒì„±ëœ íŒŒì¼ êµ¬ì¡°:**

```
packages/math/
â”œâ”€â”€ dist/
â”‚   â”œâ”€â”€ add.js
â”‚   â”œâ”€â”€ add.d.ts
â”‚   â”œâ”€â”€ subtract.js
â”‚   â””â”€â”€ subtract.d.ts
â””â”€â”€ src/
    â”œâ”€â”€ add.ts
    â””â”€â”€ subtract.ts
```

## ë‚´ë¶€ íŒ¨í‚¤ì§€ ì„¤ê³„ ëª¨ë²” ì‚¬ë¡€

### 1. í•˜ë‚˜ì˜ ëª©ì ì„ ìœ„í•œ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€

ê° íŒ¨í‚¤ì§€ëŠ” ëª…í™•í•œ ë‹¨ì¼ ì±…ì„ì„ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤.

#### âœ… ì¢‹ì€ ì˜ˆì‹œ

```
packages/
â”œâ”€â”€ math/           # ìˆ˜í•™ ìœ í‹¸ë¦¬í‹°ë§Œ
â”œâ”€â”€ date-utils/     # ë‚ ì§œ ì²˜ë¦¬ë§Œ
â”œâ”€â”€ ui/             # UI ì»´í¬ë„ŒíŠ¸ë§Œ
â””â”€â”€ api-client/     # API í†µì‹ ë§Œ
```

**ì¥ì :**

- ì´í•´í•˜ê¸° ì‰¬ì›€
- ì˜ì¡´ì„±ì´ ì ìŒ â†’ Turborepo ì„±ëŠ¥ í–¥ìƒ
- ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- ì„ íƒì ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥

#### âŒ ë‚˜ìœ ì˜ˆì‹œ

```
packages/
â””â”€â”€ utils/          # ëª¨ë“  ìœ í‹¸ë¦¬í‹°ë¥¼ í•œ ê³³ì—
    â”œâ”€â”€ math.ts
    â”œâ”€â”€ date.ts
    â”œâ”€â”€ string.ts
    â”œâ”€â”€ array.ts
    â””â”€â”€ validation.ts
```

**ë¬¸ì œì :**

- ë¬´ì—‡ì„ í•˜ëŠ” íŒ¨í‚¤ì§€ì¸ì§€ ë¶ˆëª…í™•
- ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ê¹Œì§€ í¬í•¨
- ë³€ê²½ ì‹œ ì „ì²´ íŒ¨í‚¤ì§€ ì¬ë¹Œë“œ
- ìºì‹œ íš¨ìœ¨ ì €í•˜

### 2. íŒ¨í‚¤ì§€ ê°„ ì§ì ‘ íŒŒì¼ ì ‘ê·¼ ê¸ˆì§€

íŒ¨í‚¤ì§€ëŠ” ë°˜ë“œì‹œ `package.json`ì˜ `exports`ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤.

#### âŒ ì˜ëª»ëœ ë°©ì‹: ìƒëŒ€ ê²½ë¡œë¡œ ì§ì ‘ ì ‘ê·¼

```typescript
// apps/web/app/page.tsx
import { add } from "../../packages/math/src/add"; // âŒ ì ˆëŒ€ ê¸ˆì§€!
```

**ë¬¸ì œì :**

1. **ì˜ì¡´ì„± ê·¸ë˜í”„ íŒŒê´´**: Turborepoê°€ ì˜ì¡´ì„±ì„ ì¸ì‹í•˜ì§€ ëª»í•¨
2. **ë¹Œë“œ ìˆœì„œ ë³´ì¥ ì•ˆë¨**: mathê°€ ë¹Œë“œë˜ê¸° ì „ì— webì´ ë¹Œë“œë  ìˆ˜ ìˆìŒ
3. **ìºì‹± ë¬´íš¨í™”**: ì˜ì¡´ì„± ì¶”ì  ì‹¤íŒ¨ë¡œ ìºì‹œê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŒ
4. **íƒ€ì… ì²´í¬ ì‹¤íŒ¨**: TypeScriptê°€ ì˜¬ë°”ë¥¸ íƒ€ì…ì„ ì°¾ì§€ ëª»í•  ìˆ˜ ìˆìŒ

#### âœ… ì˜¬ë°”ë¥¸ ë°©ì‹: package.json ì˜ì¡´ì„± ëª…ì‹œ

```json
// apps/web/package.json
{
  "dependencies": {
    "@repo/math": "workspace:*"
  }
}
```

```typescript
// apps/web/app/page.tsx
import { add } from "@repo/math/add"; // âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
```

**ì¥ì :**

- Turborepoê°€ ì˜ì¡´ì„± ê·¸ë˜í”„ë¥¼ ì •í™•íˆ íŒŒì•…
- ë¹Œë“œ ìˆœì„œ ìë™ ë³´ì¥
- ìºì‹± ì •ìƒ ì‘ë™
- íƒ€ì… ì²´í¬ ì •í™•

### 3. ëª…í™•í•œ ì§„ì…ì (Entrypoint) ì •ì˜

`exports` í•„ë“œë¡œ ê³µê°œ APIë¥¼ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤.

```json
// packages/math/package.json
{
  "exports": {
    "./add": "./dist/add.js",
    "./subtract": "./dist/subtract.js"
    // multiplyëŠ” ì˜ë„ì ìœ¼ë¡œ ë…¸ì¶œí•˜ì§€ ì•ŠìŒ
  }
}
```

```typescript
// ì‚¬ìš©í•˜ëŠ” ìª½
import { add } from "@repo/math/add"; // âœ… ê°€ëŠ¥
import { multiply } from "@repo/math/multiply"; // âŒ ë¶ˆê°€ëŠ¥ (exportsì— ì—†ìŒ)
```

**ì¥ì :**

- ê³µê°œ APIì™€ ë‚´ë¶€ êµ¬í˜„ ë¶„ë¦¬
- ë¦¬íŒ©í† ë§ ì‹œ ì˜í–¥ ë²”ìœ„ ì œí•œ
- ì˜ë„í•˜ì§€ ì•Šì€ ì‚¬ìš© ë°©ì§€

## ì‹¤ì „ ì˜ˆì œ: ìƒˆ íŒ¨í‚¤ì§€ ì¶”ê°€í•˜ê¸°

ë‚ ì§œ ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•´ë³´ê² ìŠµë‹ˆë‹¤.

### 1. í´ë” ë° íŒŒì¼ ìƒì„±

```bash
mkdir -p packages/date-utils/src
```

### 2. package.json ì‘ì„±

```json
// packages/date-utils/package.json
{
  "name": "@repo/date-utils",
  "type": "module",
  "scripts": {
    "build": "tsc",
    "dev": "tsc --watch"
  },
  "exports": {
    "./format": {
      "types": "./src/format.ts",
      "default": "./dist/format.js"
    }
  },
  "devDependencies": {
    "@repo/typescript-config": "workspace:*",
    "typescript": "latest"
  }
}
```

### 3. tsconfig.json ì‘ì„±

```json
// packages/date-utils/tsconfig.json
{
  "extends": "@repo/typescript-config/base.json",
  "compilerOptions": {
    "outDir": "dist",
    "rootDir": "src"
  },
  "include": ["src"],
  "exclude": ["node_modules", "dist"]
}
```

### 4. ì†ŒìŠ¤ ì½”ë“œ ì‘ì„±

```typescript
// packages/date-utils/src/format.ts
export const formatDate = (date: Date): string => {
  return date.toISOString().split("T")[0];
};

export const formatDateTime = (date: Date): string => {
  return date.toISOString();
};
```

### 5. web ì•±ì—ì„œ ì‚¬ìš©

```bash
pnpm add @repo/date-utils --filter web
```

```typescript
// apps/web/app/page.tsx
import { add } from '@repo/math/add';
import { formatDate } from '@repo/date-utils/format';

export default function Page() {
  const sum = add(10, 5);
  const today = formatDate(new Date());

  return (
    <div>
      <p>Result: {sum}</p>
      <p>Today: {today}</p>
    </div>
  );
}
```

### 6. ë¹Œë“œ í™•ì¸

```bash
$ turbo build

â€¢ Packages in scope: @repo/date-utils, @repo/math, web
â€¢ Running build in 3 packages

@repo/date-utils:build: cache miss, executing [1.1s]
@repo/math:build: cache hit, replaying logs [0.1s]
web:build: cache miss, executing [8.5s]

Tasks:    3 successful, 3 total
Cached:   1 cached, 3 total
Time:     9.7s
```

Turborepoê°€ ìë™ìœ¼ë¡œ:

1. `@repo/date-utils`ì™€ `@repo/math`ë¥¼ ë³‘ë ¬ë¡œ ë¹Œë“œ
2. ë‘ íŒ¨í‚¤ì§€ê°€ ì™„ë£Œëœ í›„ `web` ë¹Œë“œ
3. `@repo/math`ëŠ” ë³€ê²½ì´ ì—†ì–´ì„œ ìºì‹œ ì‚¬ìš©

## ì •ë¦¬

ë‚´ë¶€ íŒ¨í‚¤ì§€ ìƒì„±ì˜ í•µì‹¬ì€ ëª…í™•í•œ êµ¬ì¡°(`package.json`, `tsconfig.json`, `src/`), exportsë¥¼ í†µí•œ ê³µê°œ API ì„ ì–¸, `turbo.json`ì˜ outputs ì„¤ì •ì…ë‹ˆë‹¤. í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ëŠ” í•˜ë‚˜ì˜ ëª©ì ë§Œ ë‹´ë‹¹í•˜ê³ , íŒ¨í‚¤ì§€ ê°„ ì ‘ê·¼ì€ ìƒëŒ€ ê²½ë¡œ ëŒ€ì‹  `package.json` ì˜ì¡´ì„±ì„ í†µí•´ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.

ë‹¤ìŒ ê¸€ì—ì„œëŠ” Turborepoì˜ íƒœìŠ¤í¬ ì„¤ì •ê³¼ íŒŒì´í”„ë¼ì¸ ìµœì í™”ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
